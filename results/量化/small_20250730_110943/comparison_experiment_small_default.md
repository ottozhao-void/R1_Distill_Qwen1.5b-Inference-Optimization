# 量化 对比实验完整报告

## 实验概述
**实验时间**: 2025-07-30 11:11:04  
**实验名称**: default  
**优化技术**: 量化  
**批次级别**: small  

## 实验配置

### 模型配置
- **模型**: /data1/zhaofanghan/.cache/huggingface/hub/DeepSeek-R1-Distill-Qwen-1.5B
- **设备**: [7]
- **批次大小**: 2

### 推理参数
- **最大tokens**: 50
- **温度**: 0.8
- **Top-p**: 0.95

### 测试参数
- **提示数量**: 5
- **预热迭代**: 2
- **测试迭代**: 3

### 量化配置
```yaml
{
  "load_in_8bit": false,
  "load_in_4bit": true
}
```

## 基础推理实验结果

### 延迟指标
- **总时间**: 19.480s
- **平均延迟**: 6493.06ms
- **P50延迟**: 6468.83ms
- **P95延迟**: 6562.71ms
- **P99延迟**: 6571.06ms
- **首token时间**: 1351.81ms
- **每输出token时间**: 30.97ms

### 吞吐量指标
- **Tokens/秒**: 32.29
- **请求/秒**: 0.15

### 内存使用
- **GPU内存峰值**: 0.00MB
- **GPU内存当前**: 0.00MB
- **CPU内存**: 1803.59MB

## 优化推理实验结果

### 延迟指标
- **总时间**: 36.187s
- **平均延迟**: 12061.86ms
- **P50延迟**: 12080.65ms
- **P95延迟**: 12198.94ms
- **P99延迟**: 12209.45ms
- **首token时间**: 2411.84ms
- **每输出token时间**: 56.19ms

### 吞吐量指标
- **Tokens/秒**: 17.80
- **请求/秒**: 0.08

### 内存使用
- **GPU内存峰值**: 0.00MB
- **GPU内存当前**: 0.00MB
- **CPU内存**: 3768.27MB

## 性能改进分析

### 改进指标对比
| 指标 | 基础推理 | 优化推理 | 改进 |
|------|----------|----------|------|
| 平均延迟 | 6493.06ms | 12061.86ms | -85.8% |
| 吞吐量 | 32.29 tokens/s | 17.80 tokens/s | -44.9% |
| GPU内存峰值 | 0.00MB | 0.00MB | +0.0% |
| 首token时间 | 1351.81ms | 2411.84ms | -78.4% |
| 每输出token时间 | 30.97ms | 56.19ms | -81.4% |

### 优化效果总结
- ⚠️ **性能无明显提升**: 在当前测试场景下，量化优化效果不明显

## 结论
本次实验对比了基础推理与使用量化技术的优化推理性能。在当前测试配置下，量化技术的优化效果有限，可能需要调整配置参数或在更大规模的测试中验证效果。

---
*报告生成时间: 2025-07-30 11:11:04*
